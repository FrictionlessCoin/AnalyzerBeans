<?xml version="1.0" encoding="UTF-8"?>
<job xmlns="http://eobjects.org/analyzerbeans/job/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

	<source>
		<data-context ref="orderdb" />
		<columns>
			<column id="col_email" path="PUBLIC.EMPLOYEES.EMAIL" />
			<column id="col_territory" path="PUBLIC.CUSTOMER_W_TER.TERRITORY" />
		</columns>
	</source>

	<transformation>
		<transformer>
			<descriptor ref="Concatenator" />
			<input ref="col_email" />
			<input ref="col_territory" />
			<output id="col_concatenated" />
		</transformer>

		<filter>
			<descriptor ref="Not null" />
			<input ref="col_territory" />
			<outcome category="VALID" id="has_territory" />
		</filter>
	</transformation>

	<analysis>
		<!-- The problem here is that the filter producing has_territory will only 
			be invoked for the CUSTOMERS_W_TER table. When the EMPLOYEES table is processed 
			neither the filter nor this analyzer will be able to run -->
		<analyzer requires="has_territory">
			<descriptor ref="Value distribution" />
			<input ref="col_concatenated" />
		</analyzer>
	</analysis>

</job>